<!DOCTYPE html>
<html>
    <head>
        <title id="title">Stella - Things to change the world.</title>
        <link href="unified.css" rel="stylesheet" />
        <script type="text/javascript">
            var params = document.URL.split("?");
            if (window.innerWidth < window.innerHeight) {
                window.location.replace("index-m.html?" + params[1]);
            }
            function createCookie(name, valued, days) {
                if (days) {
                    var date = new Date();
                    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
                    var expires = "; expires=" + date.toGMTString();
                } else var expires = "";
                document.cookie = name + "=" + valued + expires + "; path=/";
            }

            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(";");
                for (var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == " ") c = c.substring(1, c.length);
                    if (c.indexOf(nameEQ) == 0)
                        return c.substring(nameEQ.length, c.length);
                }
                return null;
            }

            function eraseCookie(name) {
                createCookie(name, "", -1);
            }
        </script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" type="image/png" href="favicon.png" />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
            rel="stylesheet"
        />
    </head>
    <body onload="loadcall()">
        <!-- Adrenaline Engine 5 -->
        <div class="hidden" style="font-family: 'Inter'">
            <p>
                See this message? There may be an issue with your browser, try
                refreshing the page or coming back later.
            </p>
        </div>
        <div class="rainbow-head">
            <div class="rainbow-head-inner">
                <p>&nbsp</p>
            </div>
        </div>
        <div class="content">
            <div class="tabindex" tabindex="1">
                <p>
                    Press the index key again to scroll through the list of
                    available actions.
                </p>
            </div>
            <div class="tabindex" tabindex="2">
                <p>
                    A popup will show with your action, press the index key
                    again to visit that action.
                </p>
            </div>
            <a class="tabindex" tabindex="3"><p>Focus on search box.</p></a>
            <a class="tabindex" tabindex="5"
                ><p>Focus on "Text" button in crossbar.</p></a
            >
            <a class="tabindex" tabindex="7"
                ><p>Focus on "Images" button in crossbar.</p></a
            >
            <a class="tabindex" tabindex="9"
                ><p>Focus on "Tab" button in crossbar.</p></a
            >
            <div
                style="
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 40px;
                "
            >
                <div style="margin-top: -20px">
                    <a href="../index-d.html" class="a">
                        <h1
                            style="
                                display: inline-block;
                                vertical-align: middle;
                                margin-right: 10px;
                            "
                        >
                            Stella
                        </h1></a
                    >
                    <div
                        class="input-out"
                        style="display: inline-block; vertical-align: middle"
                    >
                        <input
                            tabindex="4"
                            type="search"
                            id="sb"
                            style="width: 100%"
                            placeholder="Search the Internet."
                        />
                        <script>
                            var input = document.getElementById("sb");
                            input.addEventListener("keyup", function (event) {
                                event.preventDefault();
                                if (event.keyCode === 13) {
                                    var inputa = encodeURIComponent(
                                        document.getElementById("sb").value
                                    );
                                    window.location =
                                        "index-d.html?q=" + inputa;
                                }
                            });
                        </script>
                    </div>
                </div>
                <div
                    id="ham"
                    onclick="document.getElementById('sidebar').setAttribute('class','sidebar-s'); window.open('../global_ass/sidebar-d.html', 'sidebar-in');"
                    class="hamburger"
                >
                    <image src="../../images/hamburger.svg"></image>
                </div>
            </div>
            <div style="margin-top: -40px">
                <div class="crossbar">
                    <div>
                        <button
                            tabindex="6"
                            onclick="text_click()"
                            id="text-btn"
                        >
                            <script type="text/javascript">
                                function text_click() {
                                    var q = new URL(
                                        window.location
                                    ).searchParams.get("q");
                                    window.location =
                                        "index-d.html?q=" +
                                        q +
                                        "#gsc.tab=0&gsc.q=" +
                                        q;
                                    document
                                        .getElementById("text-btn")
                                        .setAttribute(
                                            "class",
                                            "crossbar-button-active"
                                        );
                                    document
                                        .getElementById("image-btn")
                                        .setAttribute("class", "");
                                }
                            </script>
                            Text</button
                        ><button
                            tabindex="8"
                            onclick="img_click()"
                            id="image-btn"
                        >
                            <script type="text/javascript">
                                function img_click() {
                                    var q = new URL(
                                        window.location
                                    ).searchParams.get("q");
                                    window.location =
                                        "index-d.html?q=" +
                                        q +
                                        "#gsc.tab=1&gsc.q=" +
                                        q;
                                    document
                                        .getElementById("image-btn")
                                        .setAttribute(
                                            "class",
                                            "crossbar-button-active"
                                        );
                                    document
                                        .getElementById("text-btn")
                                        .setAttribute("class", "");
                                }
                            </script>
                            Images</button
                        ><button
                            onclick="tab_click()"
                            tabindex="10"
                            id="tab-btn"
                        ></button>
                        <script type="text/javascript">
                            var query = new URL(
                                window.location
                            ).searchParams.get("q");
                            const ls = window.localStorage;
                            var tabs = ls.getItem("tabs");

                            if (tabs == null) {
                                // ls.setItem("tabs", JSON.stringify([]));
                                // tabs = ls.getItem("tabs");
                                document
                                    .getElementById("tab-btn")
                                    .setAttribute("class", "");
                                document.getElementById("tab-btn").innerText =
                                    "Tab";
                            } else {
                                tabs = JSON.parse(tabs);

                                const found = tabs.find(
                                    (item) => item.query === query
                                );
                                console.log(found);

                                document.getElementById("tab-btn").innerText =
                                    "Tab";
                                if (found) {
                                    document
                                        .getElementById("tab-btn")
                                        .setAttribute(
                                            "class",
                                            "crossbar-button-active"
                                        );
                                    document.getElementById(
                                        "tab-btn"
                                    ).innerText = "Tabbed";
                                } else {
                                    document
                                        .getElementById("tab-btn")
                                        .setAttribute("class", "");
                                    document.getElementById(
                                        "tab-btn"
                                    ).innerText = "Tab";
                                }
                            }

                            function tab_click() {
                                const ls = window.localStorage;
                                let tabs = ls.getItem("tabs");
                                if (tabs == null) {
                                    ls.setItem(
                                        "tabs",
                                        JSON.stringify([
                                            {
                                                type: "search",
                                                query: query,
                                            },
                                        ])
                                    );

                                    tabs = ls.getItem("tabs");
                                    document
                                        .getElementById("tab-btn")
                                        .setAttribute(
                                            "class",
                                            "crossbar-button-active"
                                        );
                                }

                                tabs = JSON.parse(tabs);
                                const found = tabs.find(
                                    (item) => item.query === query
                                );

                                for (const item of tabs) {
                                    if (item.query == query) {
                                        tabs.splice(tabs.indexOf(item), 1);
                                        ls.setItem(
                                            "tabs",
                                            JSON.stringify(tabs)
                                        );
                                        document
                                            .getElementById("tab-btn")
                                            .setAttribute("class", "");
                                        document.getElementById(
                                            "tab-btn"
                                        ).innerText = "Tab";
                                        return;
                                    }
                                }

                                if (!found) {
                                    tabs.push({
                                        type: "search",
                                        query: query,
                                    });
                                    ls.setItem("tabs", JSON.stringify(tabs));
                                    document
                                        .getElementById("tab-btn")
                                        .setAttribute(
                                            "class",
                                            "crossbar-button-active"
                                        );
                                    addSyncTask("upload", "tabs");

                                    document.getElementById(
                                        "tab-btn"
                                    ).innerText = "Tabbed";

                                    return sync(() => {
                                        document.getElementById(
                                            "tab-btn"
                                        ).innerText = "Tabbed";
                                    });
                                }
                            }
                        </script>
                    </div>
                    <div>
                        <button
                            id="sharebtn"
                            onclick="qropen()"
                            style="padding: 15px"
                        >
                            <image
                                style="opacity: 1"
                                class="r-img"
                                src="/images/qr-code.png"
                            ></image>
                            <script>
                                function qropen() {
                                    var button =
                                        document.getElementById("sharebtn");
                                    if (
                                        button.getAttribute("class") ==
                                        "crossbar-button-active"
                                    ) {
                                        sharesheet("close");
                                    } else {
                                        sharesheet("open");
                                    }
                                }
                            </script>
                        </button>
                    </div>
                </div>
                <a class="tabindex" tabindex="11"><p>Focus on content</p></a>

                <div class="block-results looking">
                    <div class="blocks-searching">
                        <div class="searchBall" id="blocks-search-ball"></div>
                        <p><i id="blocks-status">Blocks is thinking...</i></p>
                    </div>
                    <div
                        class="rainbow-strips hidden"
                        id="rainbow-strips"
                    ></div>
                    <div class="blocks-information hidden"></div>
                    <div class="blocks-agreement hidden">
                        <h2>Use Blocks?</h2>
                        <p>
                            Blocks provides you search insights alongside your
                            results.
                        </p>
                        <p>
                            Your use of Blocks is governed by the
                            <a href="/en/id/privacy.html"
                                >Stella Privacy Policy</a
                            >
                        </p>
                        <button id="blocks-consent-btn">I agree</button>
                    </div>
                </div>

                <script
                    async
                    src="https://cse.google.com/cse.js?cx=012222161208944868770:76blcc7ir91"
                ></script>
                <div class="gcse-searchresults-only"></div>
                <p id="resgog" style="display: none">Results from Google</p>
            </div>
        </div>
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar-h">
            &nbsp
            <iframe
                name="sidebar-in"
                id="sidebar-in"
                frameborder="0"
                style="height: 100vh"
            ></iframe>
        </div>
        <script>
            window.addEventListener("click", function (e) {
                if (
                    document.getElementById("sidebar-in").contains(e.target) ||
                    document.getElementById("ham").contains(e.target)
                ) {
                    // Clicked in box
                } else {
                    // Clicked outside the box
                    document
                        .getElementById("sidebar")
                        .setAttribute("class", "sidebar-h");
                }
            });
        </script>

        <script src="../global_ass/script.js"></script>
        <script src="/blocks/adapter.js"></script>

        <script src="search.js"></script>
        <!-- QR sheet -->
        <div class="sharesheet" id="sharesheet" style="visibility: hidden">
            <center>
                <h2>QR Code</h2>
                <div id="qrjs" class="qr"></div>
                <p>Scan this code using your phone or tablet.</p>
            </center>
        </div>
        <script>
            document.body.addEventListener("mouseup", bodyclick);

            function bodyclick(e) {
                if (e.target.getAttribute("id") != "sharesheet") {
                    sharesheet("close");
                }
            }
            function sharesheet(state) {
                var button = document.getElementById("sharebtn");
                document.getElementById("qrjs").innerHTML = "";
                new QRCode(document.getElementById("qrjs"), {
                    text: window.location.href,
                    width: 200,
                    height: 200,
                    colorDark: "#000000",
                    colorLight: "#FFFFFF00",
                    correctLevel: QRCode.CorrectLevel.H,
                });
                if (state == "open") {
                    document
                        .getElementById("sharesheet")
                        .setAttribute("style", "top: 170px;");
                    button.setAttribute("class", "crossbar-button-active");
                }
                if (state == "close") {
                    document
                        .getElementById("sharesheet")
                        .setAttribute("style", "visibility: hidden;");
                    button.setAttribute("class", "");
                }
            }
        </script>
        <style>
            .sharesheet {
                width: 300px;
                height: 350px;
                background-color: rgba(0, 0, 0, 0.8);
                border-radius: 10px;
                backdrop-filter: blur(20px);
                -webkit-backdrop-filter: blur(10px);
                position: absolute;
                top: 160px;
                right: 10.3%;
                transition: top 0.2s cubic-bezier(0.05, 0.95, 0.94, 0.95);
            }
            .sharesheet h2,
            .sharesheet p {
                color: white;
            }
            .qr {
                filter: invert();
                margin-top: 10px;
                opacity: 0.8;
            }

            @media (prefers-color-scheme: dark) {
                .sharesheet {
                    background-color: rgba(255, 255, 255, 0.8);
                }
                .qr {
                    filter: invert(0);
                }

                .sharesheet h2,
                .sharesheet p {
                    color: black;
                }
            }
        </style>
        <script src="qrcode.js"></script>
    </body>
</html>
